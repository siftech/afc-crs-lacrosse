do "./defaults.pl" || die "Can't do './defaults.pl': $@";

$run_in_compose = 1;

our $cp_config = "../crs-sandbox-items/sift/mock-cp-config.yaml";

our $experiment = '
  (push :msg *debug-list*)
  (push :amp *debug-list*)
  (push :target *debug-list*)
  (setf *run-fake-bridge* t)
  (setf *fake-fuzz* nil)
  (setf *use-afl* nil)
  (setf *lacrosse* t)
  (setf *fuzzer-timeout* "1m")
  (setf *fake-bridge-script*
    \'(
       (1 ((:type :new-challenge-project)
           (:target (()))))
;;       (12000 ((:type :halt)))
))
';

our $numfbs = 2;
our $allocationmethod = "balanced";

#our $success_pattern = "Received BIC-FOUND";
#our $success_pattern = "Status received: accepted, VD_UUID=";
our $success_pattern = "Patch status received: accepted, CPV_UUID=";
our $success_timeout = "10m";

do "./common.pl" || die "Can't do './common.pl': $@";

$test = {
    #   This is equiv to 3fb-2fuzzing-mock-cp-libfuzzer-only.prt w one fewer FB and a shorter timeout.
    defaultIgnore => 1,
    keywords => [ qw / lacrosse / ],
    cleanup => \&condor_killer,
    agents => [
        @clean_and_start_agents,
    ],
};

$test;

# vim: set ft=perl :
